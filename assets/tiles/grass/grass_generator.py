from PIL import Image
from random import randint, choice

tile_matrix = [
	"______________________________xxxx______________________________",
	"____________________________xx0000xx____________________________",
	"__________________________xx00000000xx__________________________",
	"________________________xx000000000000xx________________________",
	"______________________xx0000000000000000xx______________________",
	"____________________xx00000000000000000000xx____________________",
	"__________________xx000000000000000000000000xx__________________",
	"________________xx0000000000000000000000000000xx________________",
	"______________xx00000000000000000000000000000000xx______________",
	"____________xx000000000000000000000000000000000000xx____________",
	"__________xx0000000000000000000000000000000000000000xx__________",
	"________xx00000000000000000000000000000000000000000000xx________",
	"______xx000000000000000000000000000000000000000000000000xx______",
	"____xx0000000000000000000000000000000000000000000000000000xx____",
	"__xx00000000000000000000000000000000000000000000000000000000xx__",
	"xx000000000000000000000000000000000000000000000000000000000000xx",
	"xx000000000000000000000000000000000000000000000000000000000000xx",
	"__xx00000000000000000000000000000000000000000000000000000000xx__",
	"____xx0000000000000000000000000000000000000000000000000000xx____",
	"______xx000000000000000000000000000000000000000000000000xx______",
	"________xx00000000000000000000000000000000000000000000xx________",
	"__________xx0000000000000000000000000000000000000000xx__________",
	"____________xx000000000000000000000000000000000000xx____________",
	"______________xx00000000000000000000000000000000xx______________",
	"________________xx0000000000000000000000000000xx________________",
	"__________________xx000000000000000000000000xx__________________",
	"____________________xx00000000000000000000xx____________________",
	"______________________xx0000000000000000xx______________________",
	"________________________xx000000000000xx________________________",
	"__________________________xx00000000xx__________________________",
	"____________________________xx0000xx____________________________",
	"______________________________xxxx______________________________",
]

grass = (0, 191, 0)

def biased_randint(lower, upper, direction, strength):
	if strength == 0:
		return randint(lower, upper)
	if direction == 'lower':
		return randint(lower, biased_randint(lower, upper, direction, strength - 1))
	if direction == 'upper':
		return randint(biased_randint(lower, upper, direction, strength - 1), upper)

def force_between(lower, amount, upper):
	return min(max(lower, amount), upper)

def grass_color_variant():
	return (
		force_between(0, grass[0] + choice([-1, 1]) * biased_randint(0, 63, 'lower', 2), 255),
		force_between(0, grass[1] + choice([-1, 1]) * biased_randint(0, 63, 'lower', 2), 255),
		force_between(0, grass[2] + choice([-1, 1]) * biased_randint(0, 63, 'lower', 2), 255)
	)

for varation in range(0, 100):
	tile_image = Image.new('RGBA', (64, 32))

	for y, row in enumerate(tile_matrix):
		for x, col in enumerate(row):
			if col == 'x':
				tile_image.putpixel((x, y), (0, 0, 0))
			elif col == '0':
				tile_image.putpixel((x, y), grass_color_variant())

	tile_image.save(f"assets/tiles/grass/grass_{varation}.png", "PNG")